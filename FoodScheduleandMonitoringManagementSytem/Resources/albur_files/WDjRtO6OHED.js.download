if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MWChatSearchTypeaheadLightspeedDataSource",["FBLogger","LSSearchType.bs","MNetRankType.bs","MWChatSearchIssueLightspeedQuery.re","MWLSSearchIssueSearchQuerySupportedTypes.re","Promise","cr:2752","cr:3071","createMWChatSearchTypeaheadDataEntry","gkx","mwChatSearchPayloadDecoratorRemoveDuplicates","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","qex","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("4164");var h=a&&((d=c("qex")._("73"))!=null?d:!1),i=(e=c("qex")._("962"))!=null?e:a?10:0,j=(f=c("qex")._("963"))!=null?f:a?10:0,k=[c("LSSearchType.bs").contact];function l(a,d,e){return b("cr:2752")==null?b("Promise").resolve([]):b("cr:2752").fetchResults(a,d,e).then(function(a){a=a.map(c("createMWChatSearchTypeaheadDataEntry"));return j<=0?a:a.slice(0,j)})["catch"](function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults");return[]})}function m(a,d){if(!h&&a===c("MWChatSearchIssueLightspeedQuery.re").Surfaces.broadcast)return b("Promise").resolve([]);return b("cr:3071")==null?b("Promise").resolve([]):b("cr:3071").search(d.query).then(function(a){a=a.map(c("createMWChatSearchTypeaheadDataEntry"));return i<=0?a:a.slice(0,i)})}function n(a,c,d){a=l(a,c,d);c=m(c,d);return b("Promise").all([a,c])}d=function(){function a(a){var b=a.excludedIDs;b=b===void 0?[]:b;var d=a.lightspeedSupportedTypes;d=d===void 0?c("MWLSSearchIssueSearchQuerySupportedTypes.re").allSupportedTypes:d;var e=a.source;e=e===void 0?c("MWChatSearchIssueLightspeedQuery.re").Surfaces.universal:e;var f=a.includeThreadSearch;f=f===void 0?!1:f;var g=a.excludeNonSecureThreadSearch;g=g===void 0?!1:g;a=a.nullStateRankType;a=a===void 0?c("MNetRankType.bs").messengerUserSearchNullstate:a;this.$1=[];this.$2=[];this.$2=b;this.$3=d;this.$4=e;this.$5=f;this.$6=g;this.$7=a}var d=a.prototype;d.fetchNetwork=function(a){var d,e,f,g,h,i,j;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:d=c("mwChatSearchPayloadDecoratorRemoveDuplicates")(this.$1);e=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$2);if(!(a.query.length===0)){l.next=4;break}return l.abrupt("return",c("MWChatSearchIssueLightspeedQuery.re").fetchRecommendations(this.$3,this.$4,a,this.$7).then(function(d){d=d.map(c("createMWChatSearchTypeaheadDataEntry"));return b("Promise").resolve({entries:d,params:a})}));case 4:f=[];this.$5&&!this.$6&&f.push({key:a.query,label:'Search messages for "'+a.query+'"',rawData:{displayName:'Search messages for "'+a.query+'"',id:a.query,imageUrl:"",isContact:!1,isE2e:!1,resultType:"messages",secondaryImageUrl:"",subtext:""}});l.next=8;return b("regeneratorRuntime").awrap(n(this.$3,this.$4,a));case 8:g=l.sent;h=g[0];i=g[1];j=this.$6?k:this.$3;return l.abrupt("return",c("MWChatSearchIssueLightspeedQuery.re").fetchResults(j,this.$4,a).then(function(b){b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=f.concat(i,h,b);b=c("mwChatSearchPayloadEnumerate")(e(d({entries:b,params:a})));return b}));case 13:case"end":return l.stop()}},null,this)};d.setTokens=function(a){this.$1=a};return a}();g["default"]=d}),98);
__d("MWChatSearchFetchContactRecommendations.re",["MWChatSearchFetchContactRecommendations.bs","bs_curry"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MWChatSearchFetchContactRecommendations.bs").useHook,a.rankType,c);return a};f.useHook=a;c=b("MWChatSearchFetchContactRecommendations.bs").useActiveContactCount;f.useActiveContactCount=c}),null);
__d("useMWLightSpeedChatSearchSuggestedContacts",["MWChatSearchFetchContactRecommendations.re","createMWChatSearchTypeaheadDataEntry","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo,i={};function a(){var a=d("MWChatSearchFetchContactRecommendations.re").useHook(i);return h(function(){return a.map(function(a,b){a=a[0];return c("createMWChatSearchTypeaheadDataEntry")(a,b)})},[a])}g["default"]=a}),98);
__d("MWJewelSearchTypeahead.react",["fbt","BaseTypeahead.react","CometRelay","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","LsUniversalSearchEndFalcoEvent","LsUniversalSearchQueryChangedFalcoEvent","LsUniversalSearchStartFalcoEvent","MAWGating.re","MWChatSearchIssueLightspeedQuery.re","MWChatSearchTypeaheadLightspeedDataSource","MWLSSearchIssueSearchQuerySupportedTypes.re","MWLSThreadDisplayContext.re","MWSearchLogging","clearTimeout","createMWJewelSearchTypeaheadViewStrategy.react","gkx","react","setTimeout","useMWLightSpeedChatSearchSuggestedContacts","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useMemo,l=b.useRef,m=b.useState,n={searchInput:{marginTop:"aov4n071",marginEnd:"cxmmr5t8",marginBottom:"bi6gxh9e",marginStart:"hcukyx3x",paddingTop:"jb3vyjys",paddingEnd:"hv4rvrfc",paddingBottom:"qt6c0cv9",paddingStart:"dati1w0a"},searchView:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"mvk8q8v6",display:"j83agx80",minHeight:"mw5ich9q"}},o=c("createMWJewelSearchTypeaheadViewStrategy.react")(),p=["1001"];function a(a){var b=a.onBlur,e=a.onChange,f=a.onFocus,g=a.onPressEntry,q=babelHelpers.objectWithoutPropertiesLoose(a,["onBlur","onChange","onFocus","onPressEntry"]);a=m(null);var r=a[0],s=a[1],t=d("CometRelay").useRelayEnvironment(),u=l(null),v=c("MWLSThreadDisplayContext.re").useHook();a=k(function(){return new(c("MWChatSearchTypeaheadLightspeedDataSource"))({excludedIDs:[],includeRecommendations:!0,includeThreadSearch:v==="Inbox"&&c("gkx")("1902857"),lightspeedSupportedTypes:c("MWLSSearchIssueSearchQuerySupportedTypes.re").allSupportedTypes,limit:20,relayEnvironment:t,source:c("MWChatSearchIssueLightspeedQuery.re").Surfaces.universal})},[t,v]);var w=j(function(){s(null),r!=null&&c("LsUniversalSearchEndFalcoEvent").log(function(){return{end_action:0,instance_id:r,recipient_ids:p}}),e("")},[e,r]),x=j(function(a){var b=function(){u.current!=null&&(c("clearTimeout")(u.current),u.current=null),g!=null&&g(a)};if(r==null){b();return}d("MWSearchLogging").logResultSelected(r,q.queryString,a,p);b()},[g,r,q.queryString]),y=j(function(){var a=c("uuid")();s(a);c("LsUniversalSearchStartFalcoEvent").log(function(){return{instance_id:a}});u.current=c("setTimeout")(function(){c("LsUniversalSearchEndFalcoEvent").log(function(){return{end_action:3,instance_id:a,recipient_ids:p}})},3e4)},[]),z=j(function(a){r!=null&&c("LsUniversalSearchQueryChangedFalcoEvent").log(function(){return{instance_id:r,query_string:a}}),e(a)},[e,r]),A=c("useMWLightSpeedChatSearchSuggestedContacts")();return i.jsx(c("BaseTypeahead.react"),{dataSource:a,dataSourceFetchConfigParams:d("MAWGating.re").isArmadillo()?{requestFlow:"network-upon-approve"}:{},emptyEntries_DO_NOT_USE:A,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputStartContent:r?i.jsx(c("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:c("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:c("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onBlur:b,onChange:z,onClose:w,onFocus:f,onOpen:y,onPressEntry:x,placeholder:h._(/*FBT_CALL*/"Search Messenger"/*FBT_CALL*/),queryString:q.queryString,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:o,xstyles:{inputXStyle:n.searchInput,viewXStyle_DO_NOT_USE:n.searchView}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);